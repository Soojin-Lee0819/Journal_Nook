{% extends "base.html" %}
{% block title %}Home{% endblock %}

{% block content %}
<h1 align="center">Notes</h1>

<ul class="list-group list-group-flush" id="notes">
  {% for note in user.notes %}
  <li class="list-group-item">
    {{ note.data }}
    <button type="button" class="close" onClick="deleteNote({{ note.id }})">
      <span aria-hidden="true">&times;</span>
    </button>
  </li>
  {% endfor %}
</ul>

<form method="POST">
  <textarea name="note" id="note" class="form-control"></textarea>
  <br />
  <div align="center">
    <button type="submit" class="btn btn-primary">Add Note</button>
  </div>
</form>

<!-- Buttons to Trigger Popups -->
<div align="center" style="margin-top: 20px;">
  <button class="btn btn-info" onClick="openPopup('/popup_poem')">Open Poem Popup</button>
  <button class="btn btn-info" onClick="openPopup('/popup_quote')">Open Quote Popup</button>
</div>

<!-- Modal for Popups -->
<div id="popup-overlay" onclick="closePopup()" style="display: none;"></div>
<div id="popup" style="display: none;">
  <div id="popup-content"></div>
  <div align="center" style="margin-top: 10px;">
    <button class="btn btn-secondary" onClick="closePopup()">Close</button>
  </div>
</div>

<script>
  function openPopup(url) {
    // Fetch content from the specified URL and display it in the popup
    fetch(url)
      .then((response) => response.text())
      .then((data) => {
        document.getElementById('popup-content').innerHTML = data;
        document.getElementById('popup').style.display = 'block';
        document.getElementById('popup-overlay').style.display = 'block';
      });
  }

  function closePopup() {
    // Hide the popup and overlay
    document.getElementById('popup').style.display = 'none';
    document.getElementById('popup-overlay').style.display = 'none';
  }
</script>

<style>
  /* Style for the popup modal */
  #popup {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background-color: white;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    z-index: 1000;
    max-width: 500px;
    width: 80%;
    max-height: 80vh;
    overflow-y: auto;
  }

  #popup-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    z-index: 999;
  }
</style>
{% endblock %}
