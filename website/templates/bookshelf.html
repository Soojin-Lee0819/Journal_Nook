{% extends "base.html" %}
{% block title %}Bookshelf{% endblock %}

{% block content %}
<div class="bookshelf-container">
  <!-- Centered Image -->
  <div class="image-container">
    <img src="{{ url_for('static', filename='images/bookshelf_bg.jpg') }}" alt="Bookshelf" class="centered-image" />
    
    <!-- Hoverable and Clickable Sections -->
    <button class="custom-button poem" onClick="openPopup('{{ url_for('views.popup_poem') }}')">Poem</button>
    <button class="custom-button quote" onClick="openPopup('{{ url_for('views.popup_quote') }}')">Quote</button>
    <button class="custom-button entry" onClick="openPopup('{{ url_for('views.popup_entry') }}')">Entries</button>
  </div>

  <!-- Modal for Popups -->
  <div id="popup-overlay" onclick="closePopup()" style="display: none;"></div>
  <div id="popup" style="display: none;">
    <div id="popup-content"></div>
    <div align="center" style="margin-top: 10px;">
    </div>
  </div>
</div>

<script>
  function openPopup(url) {
    fetch(url)
      .then((response) => {
        if (!response.ok) {
          throw new Error(`HTTP error! status: ${response.status}`);
        }
        return response.text();
      })
      .then((data) => {
        const parser = new DOMParser();
        const doc = parser.parseFromString(data, 'text/html');
        const modalContent = doc.querySelector('body').innerHTML;
        document.getElementById('popup-content').innerHTML = modalContent;
        document.getElementById('popup').style.display = 'block';
        document.getElementById('popup-overlay').style.display = 'block';
      })
      .catch((error) => {
        console.error('Error fetching popup content:', error);
        document.getElementById('popup-content').innerHTML =
          '<p>Error loading content. Please try again later.</p>';
        document.getElementById('popup').style.display = 'block';
        document.getElementById('popup-overlay').style.display = 'block';
      });
  }

  function closePopup() {
    document.getElementById('popup').style.display = 'none';
    document.getElementById('popup-overlay').style.display = 'none';
  }
</script>

<style>
  .container{
    min-width:100vw;
    padding: 0;
  }
  .bookshelf-container {
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    background-color: #f5f5f5;
    position: relative;
  }

  .image-container {
    position: relative;
    width: 100%; /* Adjustable for responsiveness */
  }

  .centered-image {
    width: 100%;
    height: auto;
    display: block;
    margin: 0 auto;
  }

  /* Custom buttons for hoverable and clickable sections */
  .custom-button {
    position: absolute;
    background: rgba(255, 255, 255, 0.5); /* Semi-transparent */
    border: 1px solid #ccc;
    cursor: pointer;
    border-radius: 5px;
    opacity: 0.8;
    transition: opacity 0.3s, transform 0.3s;
  }

  .custom-button:hover {
    opacity: 1;
    transform: scale(1.1);
  }

  /* Position of the "Poem" button */
  .poem {
    top: 10%; /* Position relative to the image */
    left: 20%;
    width: 10%; /* Proportional width */
    height: 40%; /* Proportional height */
  }

  /* Position of the "Quote" button */
  .quote {
    top: 10%;
    left: 45%;
    width: 10%; /* Proportional width */
    height: 40%; /* Proportional height */
  }

  .entry {
    top: 80%;
    left: 45%;
    width: 40%; /* Proportional width */
    height: 10%; /* Proportional height */
  }

  /* Style for the popup modal */
  #popup {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background-color: transparent; /* Transparent background */
    padding: 20px;
    border-radius: 10px;
    z-index: 1000;
    max-width: 800px; /* Increased width for large content */
    width: 90%; /* Adjust width to ensure enough space */
    height: auto; /* Let the height adjust based on the content */
    max-height: none; /* Remove any height restriction */
    overflow: hidden; /* Remove scrolling */
  }



  /* Style for the "X" close button */
  .close-popup {
    position: absolute;
    top: 10px;
    right: 10px;
    background: none;
    border: none;
    font-size: 24px; /* Make the "X" larger */
    font-weight: bold; /* Ensure it stands out */
    color: #333; /* Set a neutral color */
    cursor: pointer; /* Change the cursor to indicate it's clickable */
  }

  .close-popup:hover {
    color: rgb(231, 144, 144); /* Optional: Change color on hover */
  }

  .popup {
      width: 400px;
      height: 400px;
      justify-content: center;
      align-items: center;
      position: relative;
      text-align: center;
    }


  /* Blurred background effect for the overlay */
  #popup-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(217, 209, 214, 0.397); /* Semi-transparent overlay */
    backdrop-filter: blur(3px); /* Add blur to the background */
    z-index: 999;
  }

    .image-container {
      position: relative;
      width: 700px;
      height: auto;
    }

    .Book {
      width: 100%;
      height: auto;
      display: block;
    }

  
  svg {
    position: absolute;
    top: -20px; /* Adjusted positioning to give space */
    left: 50%;
    transform: translateX(-50%);
    width: 100%;
    height: 150px; /* Increased height for larger text */
  }

    text {
      font-family: 'Dancing Script', cursive;
      font-size: 24px;
      fill: url(#rainbow-gradient);
      text-anchor: middle;
      dominant-baseline: middle;
    }

    .poem-container {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: black;
      font-size: 16px;
      font-family: Arial, sans-serif;
      line-height: 1.5;
    }

    .close-popup {
      position: absolute;
      bottom: 250px;
      left: 50%;
      transform: translateX(-50%);
      background: none;
      border: none;
      font-size: 24px;
      font-weight: bold;
      color: #333;
      cursor: pointer;
    }

    .close-popup:hover {
      color: rgb(231, 144, 144);
    }
</style>
{% endblock %}
